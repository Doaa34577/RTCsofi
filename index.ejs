<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Remember the Cow</title>
		
		<link href="cow.css" type="text/css" rel="stylesheet" >
		<link href="favicon.ico" type="image/ico" rel="shortcut icon" >
        <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.0.0/prototype.js" type="text/javascript"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/scriptaculous/1.9.0/scriptaculous.js" type="text/javascript"></script> -->
		 <!-- <script src="provided.js" type="text/javascript"></script> -->
		
	</head>

	<body>
		<div class="headfoot">
			<h1>
				<img src="logo.gif" alt="logo" >
				Remember<br >the Cow
			</h1>
		</div>
		
		<div id="main">
			<p>
				The best way to manage your tasks. <br >
				Never forget the cow (or anything else) again!!
			</p>

			<p>
				Log in now to manage your to-do list:
			</p>

			<form id="loginform" >
    <div><input id="name" name="name" type="text" size="12" autofocus="autofocus" > <strong>User Name</strong></div>
    <div><input id="password" name="password" type="password" size="12" > <strong>Password</strong></div>
    <div><input id="submitbutton" type="submit" value="Log in" ></div>
			</form>
		</div>
		
		<div class="headfoot">
			<p>
				"Remember The Cow is nice, but it's a total copy of another site." - PCWorld <br >
				All pages and content &copy; Copyright CowPie Inc.
			</p>

			<div id="w3c">
				<a href="https://validator.w3.org/nu/?doc=https://526e-119-160-96-57.ngrok-free.app" target="_blank">
					<img src="https://validator.w3.org/nu/?doc=https://526e-119-160-96-57.ngrok-free.app" alt="Valid HTML" >
				</a>
				<!-- <a href="https://webster.cs.washington.edu/validate-html.php">
					<img src="https://webster.cs.washington.edu/w3c-html.png" alt="Valid HTML" /></a>
				<a href="https://webster.cs.washington.edu/validate-css.php">
					<img src="https://webster.cs.washington.edu/w3c-css.png" alt="Valid CSS" /></a>
				<a href="https://webster.cs.washington.edu/jslint/?referer">
					<img src="https://webster.cs.washington.edu/w3c-js.png" alt="Valid JS" /></a> -->
			</div>
		</div>
        <script>
//             // Handle form submission using AJAX
//             $('#loginform').submit(function (event) {
//                 event.preventDefault(); // Prevent default form submission behavior
// console.log("onsubmit called")
//                 // Extract form data
//                 var formData = $(this).serialize();

//                 // Send AJAX request
//                 $.ajax({
//                     type: 'POST',
//                     url: '/login',
//                     data: formData,
//                     success: function (response) {
//                         // Handle successful login response
//                         window.location.href = '/todolist'; // Redirect to dashboard
//                     },
//                     error: function (xhr, status, error) {
//                         // Handle error response
//                         var errorMessage = xhr.responseText;
//                         $('#errorContainer').text(errorMessage);
//                     }
//                 });
//             });

   document.getElementById('loginform').addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent default form submission behavior

        var name = document.getElementById('name').value;
        var password = document.getElementById('password').value;

        var data = {
            name: name,
            password: password
        };

        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/login');
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onload = function () {
            if (xhr.status === 200) {
                // Handle successful login response
                window.location.href = '/todolist'; // Redirect to dashboard
            } else {
                // Handle error response
                var errorMessage = xhr.responseText;
                console.log(errorMessage);
                // document.getElementById('errorContainer').textContent = errorMessage;
            }
        };
        xhr.send(JSON.stringify(data));
    });

        </script>
	</body>
</html>
